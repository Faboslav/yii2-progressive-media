function isInViewport(e){var s=window.innerHeight/2,i=(window.pageYOffset||document.documentElement.scrollTop)-s,r=i+window.innerHeight+s,t=e.getBoundingClientRect().top+i,o=t+e.clientHeight;return i<t&&t<r||i<o&&o<r}function throttle(e,s){var i=Date.now();return function(){i+s-Date.now()<0&&(e(),i=Date.now())}}function debounce(r,t,o){var n;return function(){var e=this,s=arguments,i=o&&!n;clearTimeout(n),n=setTimeout(function(){n=null,o||r.apply(e,s)},t),i&&r.apply(e,s)}}function loadProgressiveMedia(){var e,s=document.querySelectorAll(".progressive-media:not(.progressive-media-loaded):not(.progressive-media-loading)");for(e=0;e<s.length;++e)isInViewport(s[e])&&loadProgressiveMedium(s[e])}function loadProgressiveMedium(e){if(e.classList.remove("progressive-media-unloaded"),e.classList.add("progressive-media-loading"),e.classList.contains("progressive-media-image")){var s=new Image;s.src=e.getAttribute("data-img-src"),s.className="progressive-media-image-original progressive-media-content",s.onload=function(){e.querySelector(".progressive-media-aspect-inner").insertAdjacentElement("beforeend",s),e.classList.remove("progressive-media-loading"),e.classList.add("progressive-media-loaded")}}else e.classList.contains("progressive-media-iframe")&&(e.querySelector(".progressive-media-aspect-inner").insertAdjacentHTML("beforeend",e.querySelector("noscript").innerText.trim()),e.classList.remove("progressive-media-loading"),e.classList.add("progressive-media-loaded"))}var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testPassive",null,opts),window.removeEventListener("testPassive",null,opts)}catch(e){}loadProgressiveMedia(),window.addEventListener("DOMContentLoaded",loadProgressiveMedia()),window.addEventListener("scroll",throttle(loadProgressiveMedia,250),!!supportsPassive&&{capture:!0,passive:!0}),window.addEventListener("resize",debounce(loadProgressiveMedia,500),!!supportsPassive&&{capture:!0,passive:!0});